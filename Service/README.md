Сервис синхронизации файлов с облачным хранилищем

Этот проект реализует сервис для синхронизации файлов на локальном компьютере с облачным хранилищем. Сервис отслеживает изменения в файловой системе на компьютере и выполняет соответствующие операции (загрузка, обновление или удаление) на облачном хранилище (в нашем случае — Яндекс Диск).


Описание

Проект разработан для синхронизации файлов между указанной локальной директорией и облачным хранилищем. Программа:
	•	Отслеживает изменения файлов на локальном компьютере.
	•	Загружает новые файлы в облачное хранилище.
	•	Обновляет изменённые файлы в облаке.
	•	Удаляет файлы из облачного хранилища при удалении их на компьютере.
	•	Логирует все действия в файл логов.


Основные функции

	1.	Связывание локальной папки и папки в облачном хранилище:
Программа синхронизирует содержимое локальной папки с папкой в Яндекс Диске, указанной в файле конфигурации.
	2.	Отслеживание изменений файлов:
Программа периодически проверяет локальную папку на изменения (появление новых файлов, изменения существующих и удаление файлов), и выполняет соответствующие операции в облачном хранилище.
	3.	Синхронизация файлов с Яндекс Диском:
При обнаружении изменений в локальной папке, сервис выполняет загрузку новых или обновлённых файлов в облачное хранилище и удаляет файлы, которые были удалены на локальном компьютере.
	4.	Логирование действий:
Все действия, включая начало работы программы и результат синхронизации, записываются в лог-файл для отслеживания процесса работы.
	5.	Конфигурация через файл config.ini:
Все параметры приложения, такие как путь к локальной папке, имя папки на Яндекс Диске, токен доступа, период синхронизации и путь к лог-файлу, настраиваются в файле конфигурации config.ini.


Установка и запуск

1. Клонирование репозитория

Склонируйте репозиторий с GitHub:
git clone https://github.com/yourusername/Service.git
cd Service


2. Создание и активация виртуального окружения

Создайте виртуальное окружение и активируйте его:
python -m venv myenv
source myenv/bin/activate  # Для Linux/MacOS


3. Установка зависимостей

Установите все зависимости проекта:
pip install -r requirements.txt


4. Настройка конфигурации

Перед запуском программы настройте файл config.ini:
[settings]
sync_folder = /path/to/your/local/folder
cloud_folder = /disk/MyFolder
token = your_oauth_token
sync_interval = 60  # Время синхронизации в секундах
log_file = /path/to/logfile.log

	•	sync_folder: Путь к локальной папке для синхронизации.
	•	cloud_folder: Папка на Яндекс Диске, с которой будет происходить синхронизация.
	•	token: Ваш OAuth токен для доступа к Яндекс Диску.
	•	sync_interval: Интервал синхронизации в секундах.
	•	log_file: Путь к файлу лога, куда будут записываться события.


5. Запуск программы

Запустите программу:
python3 sync_service.py
Программа начнёт отслеживать изменения в локальной папке и синхронизировать их с Яндекс Диском в соответствии с указанным интервалом.


6. Остановка программы

Для остановки программы просто прервите выполнение через терминал, нажав Ctrl+C.

Структура проекта

	•	sync_service.py: Основной файл, который запускает процесс синхронизации.
	•	cloud_storage.py: Класс для работы с Яндекс Диском (загрузка, обновление, удаление файлов).
	•	config.ini: Конфигурационный файл с параметрами работы программы.
	•	log.txt: Лог файл, куда записываются результаты работы программы.
	•	requirements.txt: Список зависимостей, необходимых для работы проекта.


Логирование

Все действия программы (запуск, синхронизация файлов, ошибки) записываются в лог-файл, указанный в config.ini. Логи содержат следующую информацию:
	•	Время начала работы программы.
	•	Статус синхронизации (успех или ошибка).
	•	Описание ошибки, если таковая произошла.


Пример лога

2024-12-04 10:00:00 - Начало работы программы.
2024-12-04 10:00:05 - Новый файл file1.txt загружен в облако.
2024-12-04 10:01:00 - Файл file1.txt обновлён в облаке.
2024-12-04 10:02:00 - Файл file1.txt удалён из облака.


Ошибки и их обработка

	1.	Неверный токен:
	•	При неправильном или отсутствующем токене программа завершит работу с ошибкой: Invalid token! Please check your token in config.ini.
	2.	Не найден путь к локальной папке:
	•	Если указанный путь к локальной папке неверен, программа завершится с ошибкой: Local folder not found!.
	3.	Проблемы с интернет-соединением:
	•	Если программа не может подключиться к Яндекс Диску из-за проблем с сетью, ошибка будет записана в лог, но программа продолжит работу.


Разработка

Этот проект разработан с учётом принципов чистого кода и расширяемости. Все операции с Яндекс Диском вынесены в отдельный класс, чтобы в будущем можно было легко добавить поддержку других облачных хранилищ.


Стандарты кодирования

	•	Код написан с соблюдением стандартов PEP 8.
	•	Каждая функция выполняет только одну задачу.
	•	Используется обработка ошибок, чтобы программа продолжала работать в случае возникновения непредвиденных ситуаций.
